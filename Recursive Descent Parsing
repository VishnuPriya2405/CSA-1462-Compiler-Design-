#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
int expr(char *);
int term(char *);
int factor(char *);
void error();
int parse(char *text) 
{
    return expr(text);
}
int expr(char *text) 
{
    int result = term(text);
    while (*text == '+' || *text == '-') 
	{
        char op = *text;
        text++;
        if (op == '+') 
		{
            result += term(text);
        } else {
            result -= term(text);
        }
    }
    return result;
}
int term(char *text) 
{
    int result = factor(text);
    while (*text == '//' || *text == '/') 
	{
        char op = *text;
        text++;
        if (op == '*') 
		{
            result *= factor(text);
        } 
		else 
		{
            int divisor = factor(text);
            if (divisor == 0) 
			{
                error();
            }
            result /= divisor;
        }
    }
    return result;
}
int factor(char *text) 
{
    if (isdigit(*text)) 
	{
        return strtol(text, &text, 10);
    } else if (*text == '(') 
	{
        text++;
        int result = expr(text);
        if (*text != ')') 
		{
            error();
        }
        text++;
        return result;
    } else {
        error();
    }
}
void error() 
{
    printf("Error: Invalid expression.\n");
    exit(1);
}
int main() 
{
    char expression[100];
    printf("Enter an arithmetic expression: ");
    fgets(expression, sizeof(expression), stdin);
    int result = parse(expression);
    printf("Result: %d\n", result);
    return 0;
}
